<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Flappi::Definition
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Flappi::Definition";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Flappi.html" title="Flappi (module)">Flappi</a></span></span>
     &raquo; 
    <span class="title">Definition</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="../class_list.html"></iframe>

      <div id="content"><h1>Module: Flappi::Definition
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Common</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/flappi/definition.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>DSL for API construction.</p>

<p>This DSL defines methods which can be used to construct API responses, docs, etc. Include it in each API endpoint definition as shown below:</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_include'>include</span> <span class='const'>Flappi</span><span class='op'>::</span><span class='const'>Definition</span>

<span class='kw'>def</span> <span class='id identifier rubyid_endpoint'>endpoint</span>
 <span class='comment'># Define your endpoint here using {#method}, {#title}, {#description}, {#version}, {#group}, {#path}
</span> <span class='comment'>#   #{response_example}, #{param}
</span> <span class='comment'>#   #{query}
</span><span class='kw'>end</span>

<span class='kw'>def</span> <span class='id identifier rubyid_response'>response</span>
 <span class='comment'># Define your response here using #{build}
</span><span class='kw'>end</span></code></pre>
    
  </div>


</div>
  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="BOOLEAN-constant" class="">BOOLEAN =
        <div class="docstring">
  <div class="discussion">
    
<p>Use on <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span> and <span class='object_link'><a href="#param-instance_method" title="Flappi::Definition#param (method)">#param</a></span> types when a boolean type is wanted, null values will be null</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='symbol'>:boolean_type</span></pre></dd>
    
      <dt id="BOOLEAN_STRICT-constant" class="">BOOLEAN_STRICT =
        <div class="docstring">
  <div class="discussion">
    
<p>Use on <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span> and <span class='object_link'><a href="#param-instance_method" title="Flappi::Definition#param (method)">#param</a></span> types when a boolean type is wanted and falsey values will be false, truthy true</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='symbol'>:boolean_strict</span></pre></dd>
    
      <dt id="SOURCE_PRESENT-constant" class="">SOURCE_PRESENT =
        
      </dt>
      <dd><pre class="code"><span class='symbol'>:source_present</span></pre></dd>
    
  </dl>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#api_error-instance_method" title="#api_error (instance method)">#<strong>api_error</strong>(status_code, field_name, field_description)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define an API error.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build-instance_method" title="#build (instance method)">#<strong>build</strong>(options = {}) {|base_object| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define how to build the API response.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_params-instance_method" title="#check_params (instance method)">#<strong>check_params</strong>(mode = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#description-instance_method" title="#description (instance method)">#<strong>description</strong>(v)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define the description.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#field-instance_method" title="#field (instance method)">#<strong>field</strong>(*args_or_name, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define a single (scalar) field in the result.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group-instance_method" title="#group (instance method)">#<strong>group</strong>(v)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define the API group this endpoint is in - used to break documentation into sections.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hash_key-instance_method" title="#hash_key (instance method)">#<strong>hash_key</strong>(*args, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define the hash key to be used in generating a hash from <span class='object_link'><a href="#objects-instance_method" title="Flappi::Definition#objects (method)">#objects</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_method-instance_method" title="#http_method (instance method)">#<strong>http_method</strong>(v)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define the HTTP method - note however that Rails and the controller is responsible for routing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#link-instance_method" title="#link (instance method)">#<strong>link</strong>(*link_params)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Specify a link to be provided in the response Links defined at the top level will be output at the end of the response Links defined at object level will be output at the end of the object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#major_version-instance_method" title="#major_version (instance method)">#<strong>major_version</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The major version for documentation and example purposes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#object-instance_method" title="#object (instance method)">#<strong>object</strong>(*args_or_name, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define an object (which will be rendered within json as name:hash).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#objects-instance_method" title="#objects (instance method)">#<strong>objects</strong>(*args_or_name, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define multiple objects which will be rendered into json as an array of object hashes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#param-instance_method" title="#param (instance method)">#<strong>param</strong>(*args_or_name, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define an input parameter (inline or query string) This is used to document and validate the parameters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#path-instance_method" title="#path (instance method)">#<strong>path</strong>(v)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define the path to this endpoint under the API root.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#query-instance_method" title="#query (instance method)">#<strong>query</strong> {|controller_params| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define a query to be used to retrieve the source object for the response.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reference-instance_method" title="#reference (instance method)">#<strong>reference</strong>(*args_or_name, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a sideloaded reference to an object created by the block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#request_example-instance_method" title="#request_example (instance method)">#<strong>request_example</strong>(*v)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define an example request path (no scheme or host) that will be included in documentation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#response_example-instance_method" title="#response_example (instance method)">#<strong>response_example</strong>(*v)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define an example response that will be included in documentation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#return_error-instance_method" title="#return_error (instance method)">#<strong>return_error</strong>(status_code, error_info)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>From inside a query, return an error.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#return_no_content-instance_method" title="#return_no_content (instance method)">#<strong>return_no_content</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>From inside a query, return 204 NO CONTENT.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#strict-instance_method" title="#strict (instance method)">#<strong>strict</strong>(mode = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enable/disable strict mode, unknown parameters will cause an error\ Default is to disable this.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#title-instance_method" title="#title (instance method)">#<strong>title</strong>(v)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define the title.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#version-instance_method" title="#version (instance method)">#<strong>version</strong>(version_rule)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define the version this endpoint works with.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="api_error-instance_method">
  
    #<strong>api_error</strong>(status_code, field_name, field_description)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define an API error</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


469
470
471
472
473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 469</span>

<span class='kw'>def</span> <span class='id identifier rubyid_api_error'>api_error</span><span class='lparen'>(</span><span class='id identifier rubyid_status_code'>status_code</span><span class='comma'>,</span> <span class='id identifier rubyid_field_name'>field_name</span><span class='comma'>,</span> <span class='id identifier rubyid_field_description'>field_description</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoint_info'>endpoint_info</span><span class='lbracket'>[</span><span class='symbol'>:api_errors</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
    <span class='label'>status_code:</span> <span class='id identifier rubyid_status_code'>status_code</span><span class='comma'>,</span>
    <span class='label'>response_field_name:</span> <span class='id identifier rubyid_field_name'>field_name</span><span class='comma'>,</span>
    <span class='label'>response_field_description:</span> <span class='id identifier rubyid_field_description'>field_description</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build-instance_method">
  
    #<strong>build</strong>(options = {}) {|base_object| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define how to build the API response. Use this typically with a block that defines how each field of the response is to be generated.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>fetch a user record</p>
</div></p>
      
      <pre class="example code"><code>build type: User do
     ...
end</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:type</span>
          <span class="type">(<tt>Class</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Specifies a (ruby) type, an instance of which will be retrieved by calling the classes (ActiveRecord-style) &#39;where&#39; method with the controller&#39;s parameters and will become the base object the response is generated from.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:as</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Specifies the class method to call in place on the `type`</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:options</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Optionally specify an array of options which will be passed to the &#39;where&#39; method of class &#39;type&#39;</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to generate the response using <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span>, <span class='object_link'><a href="#object-instance_method" title="Flappi::Definition#object (method)">#object</a></span> and <span class='object_link'><a href="#objects-instance_method" title="Flappi::Definition#objects (method)">#objects</a></span> elements.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>base_object</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The base object we generate the response from. If you don&#39;t use explicit value expressions in <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span> etc, you don&#39;t need this.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_params-instance_method">
  
    #<strong>check_params</strong>(mode = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


571
572
573</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 571</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_params'>check_params</span><span class='lparen'>(</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoint_info'>endpoint_info</span><span class='lbracket'>[</span><span class='symbol'>:check_params</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_mode'>mode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="description-instance_method">
  
    #<strong>description</strong>(v)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define the description</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>v</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The longer description to be shown in documentation.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


422
423
424</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 422</span>

<span class='kw'>def</span> <span class='id identifier rubyid_description'>description</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoint_info'>endpoint_info</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="field-instance_method">
  
    
      <span class="overload">#<strong>field</strong>(name) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>field</strong>(name, value)  &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>field</strong>(options = {}) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define a single (scalar) field in the result. This will produce a name:value pair in the json response.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>field</strong>(name) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define a field sourcing data from the enclosing source object. If no block is given, the field value will be extracted from <a href="name">source_object</a>, otherwise it will be the block return.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the field</p>
</div>
      
    </li>
  
</ul>

  
    
    

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to return the field value</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>current_source</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The current source object</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>field</strong>(name, value)  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define a field with an explicitly specified value.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the field</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the value to output</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>field</strong>(options = {}) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define a field with named options</p>


  </div>
</div>
<div class="tags">
  
  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:name</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The name of the field</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:value</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If given, the value to output</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:source</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The name of a hash or method in the current source to get the data from, instead of :name</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:when</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If false, omit this object, if SOURCE_PRESENT, omit unless a data source is present</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:version</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Specify a versioning rule as a hash (see #version for spec for the rule). If present, this field will only we shown if the rule is met.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:doc_name</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Where a field has a dynamic name (computed value) then use this value, enclosed in underscores, as the name of the field.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:type</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>A type to coerce the value to: :Integer, :BigDecimal, :Float</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to return the field value</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>current_source</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the current source object</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


321
322
323</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 321</span>

<span class='kw'>def</span> <span class='id identifier rubyid_field'>field</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_field'>field</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group-instance_method">
  
    #<strong>group</strong>(v)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define the API group this endpoint is in - used to break documentation into sections</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>v</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The group name.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


444
445
446</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 444</span>

<span class='kw'>def</span> <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoint_info'>endpoint_info</span><span class='lbracket'>[</span><span class='symbol'>:group</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hash_key-instance_method">
  
    
      <span class="overload">#<strong>hash_key</strong>(value, options = {})  &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>hash_key</strong>(options = {})  &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define the hash key to be used in generating a hash from <span class='object_link'><a href="#objects-instance_method" title="Flappi::Definition#objects (method)">#objects</a></span></p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>hash_key</strong>(value, options = {})  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define the hash key as having a specified value</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The value for the hash key</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:when</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If false, omit this object, if SOURCE_PRESENT, omit unless a data source is present</p>
</div>
          
        </li>
      
    </ul>
  


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>hash_key</strong>(options = {})  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define the hash key with named options</p>


  </div>
</div>
<div class="tags">
  
  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:value</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If given, the value to output</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:when</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If false, omit this object, if SOURCE_PRESENT, omit unless a data source is present</p>
</div>
          
        </li>
      
    </ul>
  


</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 343</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hash_key'>hash_key</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_hash_key'>hash_key</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="http_method-instance_method">
  
    #<strong>http_method</strong>(v)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define the HTTP method - note however that Rails and the controller is responsible for routing</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>v</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>GET, POST, PUT, DELETE</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


410
411
412</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 410</span>

<span class='kw'>def</span> <span class='id identifier rubyid_http_method'>http_method</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoint_info'>endpoint_info</span><span class='lbracket'>[</span><span class='symbol'>:http_method</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="link-instance_method">
  
    
      <span class="overload">#<strong>link</strong>(: self)  &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>link</strong>(key, path)  &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>link</strong>(options = {})  &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Specify a link to be provided in the response Links defined at the top level will be output at the end of the response Links defined at object level will be output at the end of the object</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>link</strong>(: self)  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(:self, to generate the link that produces this result)</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>link</strong>(key, path)  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>:self to generate the link that produces this result or an endpoint name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the (parameterised) path to generate the link from</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>link</strong>(options = {})  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>parameters passed to create the link</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:key</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>:self to generate the link that produces this result or an endpoint name</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:path</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>String</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>the (parameterised) path to generate the link from</p>
</div>
          
        </li>
      
    </ul>
  


</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


402
403
404</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 402</span>

<span class='kw'>def</span> <span class='id identifier rubyid_link'>link</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_link_params'>link_params</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_link'>link</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_link_params'>link_params</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:link</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="major_version-instance_method">
  
    #<strong>major_version</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The major version for documentation and example purposes</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


603
604
605</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 603</span>

<span class='kw'>def</span> <span class='id identifier rubyid_major_version'>major_version</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_requested_version'>requested_version</span><span class='op'>&amp;.</span><span class='id identifier rubyid_major'>major</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="object-instance_method">
  
    
      <span class="overload">#<strong>object</strong>(name) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>object</strong>(name, value) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>object</strong>(options) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define an object (which will be rendered within json as name:hash). Use this with a block that defines the fields of the object hash. For a named object, if no source data exists (is nil) then no object will be rendered. (Set value: true if the block can render with no input)</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>object</strong>(name) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Defines a named object using the enclosing source object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the object</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to generate the response fields using nested <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span>, <span class='object_link'><a href="#object-instance_method" title="Flappi::Definition#object (method)">#object</a></span> and <span class='object_link'><a href="#objects-instance_method" title="Flappi::Definition#objects (method)">#objects</a></span> elements.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>current_source</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the current source object from the enclosing context</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>object</strong>(name, value) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define an object using a specified value.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the object</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The object to extract fields from</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to generate the response fields using nested <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span>, <span class='object_link'><a href="#object-instance_method" title="Flappi::Definition#object (method)">#object</a></span> and <span class='object_link'><a href="#objects-instance_method" title="Flappi::Definition#objects (method)">#objects</a></span> elements.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>current_source</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the current source object (passed as value)</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>object</strong>(options) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define an object (which will be rendered within json as name:hash or inlined into the parent hash).</p>


  </div>
</div>
<div class="tags">
  
  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:name</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The name of the object</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:value</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The object to extract fields from</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:source</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The name of a hash or method in the current source to get the data from, instead of :name</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:inline_always</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Rather than creating this object&#39;s hash, inline its fields into the parent</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:when</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If false, omit this object, if SOURCE_PRESENT, omit unless a data source is present</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:version</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Specify a versioning rule as a hash (see #version for spec for the rule). If present, this object will only we shown if the rule is met.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:dynamic_key</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Rather than a fixed name, specify a key that is valid at request time.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to generate the response fields using nested <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span>, <span class='object_link'><a href="#object-instance_method" title="Flappi::Definition#object (method)">#object</a></span> and <span class='object_link'><a href="#objects-instance_method" title="Flappi::Definition#objects (method)">#objects</a></span> elements.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>current_source</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The current source object (passed as value)</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 200</span>

<span class='kw'>def</span> <span class='id identifier rubyid_object'>object</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_object'>object</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="objects-instance_method">
  
    
      <span class="overload">#<strong>objects</strong>(name, options = {}) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>objects</strong>(name, value, options = {}) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>objects</strong>(options) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define multiple objects which will be rendered into json as an array of object hashes. Use this with a block that defines the fields of each object hash. The array is generated by iterating over the source object (if an Array) or with one field (if scalar).</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>objects</strong>(name, options = {}) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Defines a named array object using the enclosing source object. Will generate name: array in json.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the array field</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:compact</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Remove nil entries from the result array</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to generate the response fields using nested <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span>, <span class='object_link'><a href="#object-instance_method" title="Flappi::Definition#object (method)">#object</a></span> and <span class='object_link'><a href="#objects-instance_method" title="Flappi::Definition#objects (method)">#objects</a></span> elements. The block will be called for each array value in sequence.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>current_source</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The current source object iterated from the enclosing context</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>objects</strong>(name, value, options = {}) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Defines a named array object using a specified (array or scalar) value. Will generate name: array in json.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the array field</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Either an array, in which case each value will become a result entry, or a scalar which will produce a single result.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:compact</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Remove nil entries from the result array</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:when</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If false, omit this object, if SOURCE_PRESENT, omit unless a data source is present</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:version</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Specify a versioning rule as a hash (see #version for spec for the rule). If present, this object will only we shown if the rule is met.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:hashed</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Produce a hash rather than a collection. The hash key is defined with <span class='object_link'><a href="#hash_key-instance_method" title="Flappi::Definition#hash_key (method)">#hash_key</a></span></p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to generate the response fields using nested <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span>, <span class='object_link'><a href="#object-instance_method" title="Flappi::Definition#object (method)">#object</a></span> and <span class='object_link'><a href="#objects-instance_method" title="Flappi::Definition#objects (method)">#objects</a></span> elements. The block will be called for each array value in sequence.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>current_source</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The current source object iterated from the enclosing context</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>objects</strong>(options) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define an object (which will be rendered within json as name:hash or inlined into the parent hash).</p>


  </div>
</div>
<div class="tags">
  
  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:name</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The name of the array field</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:value</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Either an array, in which case each value will become a result entry, or a scalar which will produce a single result.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:source</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The name of a hash or method in the current source to get the data array from, instead of :name</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:compact</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Remove nil entries from the result array</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:when</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If false, omit this object, if SOURCE_PRESENT, omit unless a data source is present</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:version</span>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Specify a versioning rule as a hash (see #version for spec for the rule). If present, this object will only we shown if the rule is met.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:hashed</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Produce a hash rather than a collection. The hash key is defined with <span class='object_link'><a href="#hash_key-instance_method" title="Flappi::Definition#hash_key (method)">#hash_key</a></span></p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to generate the response fields using nested <span class='object_link'><a href="#field-instance_method" title="Flappi::Definition#field (method)">#field</a></span>, <span class='object_link'><a href="#object-instance_method" title="Flappi::Definition#object (method)">#object</a></span> and <span class='object_link'><a href="#objects-instance_method" title="Flappi::Definition#objects (method)">#objects</a></span> elements.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>current_source</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The current source object iterated from the enclosing context</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 268</span>

<span class='kw'>def</span> <span class='id identifier rubyid_objects'>objects</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_objects'>objects</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="param-instance_method">
  
    
      <span class="overload">#<strong>param</strong>(name, options = {}) {|param| ... } &#x21d2; <tt>ParamProcessor</tt> </span>
    
      <span class="overload">#<strong>param</strong>(options = {}) {|param| ... } &#x21d2; <tt>ParamProcessor</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define an input parameter (inline or query string) This is used to document and validate the parameters.</p>

<p>Chain processor &amp;block to this to define a parameter processor and/or validator &amp;block for define a parameter validator</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>param</strong>(name, options = {}) {|param| ... } &#x21d2; <tt>ParamProcessor</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define a named parameter</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the parameter</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:name</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The name of the parameter</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:type</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The parameter type, defaults to String, allowed types are `Boolean`, `BigDecimal`, `Float`, `Integer`, `Date`, `String`, `Array`. For `Array`, the input params can be defined using comma separated or [] syntax</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:default</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>A default value when the parameter is not supplied or is empty</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:default_doc</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Text to document the default with instead of a computed default</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:doc</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The parameter description</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:hidden</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If true don&#39;t document</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:optional</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>True for an optional parameter</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to validate the parameter</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>param</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the actual parameter value to validate</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>nil if the parameter is valid, else a failure message</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ParamProcessor</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>chain this with processor or validator</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>param</strong>(options = {}) {|param| ... } &#x21d2; <tt>ParamProcessor</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define a parameter</p>


  </div>
</div>
<div class="tags">
  
  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:name</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The name of the parameter, which can be in a path</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:type</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The parameter type, defaults to String, allowed types are `Boolean`, `BigDecimal`, `Float`, `Integer`, `Date`, `String`, `Array`. For `Array`, the input params can be defined using comma separated or [] syntax</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:default</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>A default value when the parameter is not supplied or is empty</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:default_doc</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Text to document the default with instead of a computed default</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:doc</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The parameter description</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:hidden</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If true don&#39;t document</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:optional</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>True for an optional parameter</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:fail</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Code to return when fail is true</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to validate the parameter</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>param</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the actual parameter value to validate</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>nil if the parameter is valid, else a failure message</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ParamProcessor</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>chain this with processor or validator</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 548</span>

<span class='kw'>def</span> <span class='id identifier rubyid_param'>param</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_def_args'>def_args</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_definition_args'>extract_definition_args</span><span class='lparen'>(</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_require_arg'>require_arg</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='comma'>,</span> <span class='symbol'>:name</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_version_wanted'>version_wanted</span><span class='lparen'>(</span><span class='id identifier rubyid_def_args'>def_args</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_param_def'>param_def</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>name:</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='label'>type:</span> <span class='id identifier rubyid_name_for_type'>name_for_type</span><span class='lparen'>(</span><span class='id identifier rubyid_def_args'>def_args</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
                <span class='label'>default_doc:</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='lbracket'>[</span><span class='symbol'>:default_doc</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='label'>description:</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='lbracket'>[</span><span class='symbol'>:doc</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='label'>hidden:</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='lbracket'>[</span><span class='symbol'>:hidden</span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='label'>optional:</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:optional</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='lbracket'>[</span><span class='symbol'>:optional</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='kw'>true</span><span class='comma'>,</span>
                <span class='label'>validation_block:</span> <span class='id identifier rubyid_block'>block</span><span class='comma'>,</span>
                <span class='label'>fail_code:</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='lbracket'>[</span><span class='symbol'>:fail_code</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>

  <span class='comment'># options that take nil
</span>  <span class='id identifier rubyid_param_def'>param_def</span><span class='lbracket'>[</span><span class='symbol'>:default</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='lbracket'>[</span><span class='symbol'>:default</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_def_args'>def_args</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:default</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_endpoint_info'>endpoint_info</span><span class='lbracket'>[</span><span class='symbol'>:params</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_param_def'>param_def</span>

  <span class='const'>ParamProcessor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_param_def'>param_def</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="path-instance_method">
  
    #<strong>path</strong>(v)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define the path to this endpoint under the API root. This is for documentation only.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>v</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The path, with parameters.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


451
452
453</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 451</span>

<span class='kw'>def</span> <span class='id identifier rubyid_path'>path</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoint_info'>endpoint_info</span><span class='lbracket'>[</span><span class='symbol'>:path</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="query-instance_method">
  
    #<strong>query</strong> {|controller_params| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define a query to be used to retrieve the source object for the response.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to perform the query and return the source object</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>controller_params</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the parameters as passed to the controller</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>an object to construct the response from</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


586
587
588</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 586</span>

<span class='kw'>def</span> <span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reference-instance_method">
  
    
      <span class="overload">#<strong>reference</strong>(name, options = {}) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>reference</strong>(name, value, options = {})  &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a sideloaded reference to an object created by the block. The object must include an ID field</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>reference</strong>(name, options = {}) {|current_source| ... } &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define a reference sourcing data from the enclosing source object. If no block is given, the reference object will be extracted from <a href="name">source_object</a>, otherwise it will be the block return.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the field</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:type</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Creates a polymorphic reference for a named type, requires &#39;for&#39;</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:for</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>For a polymorphic relation, provide the type that is being requested/generated. (This will usually be from model data or request)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:generate_from_type</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Generate (inline) a name_type field with the type value</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:link_id</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Generate a link id name_id in the source location. Defaults to true</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>A block that will be called to return the referenced object</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>current_source</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The current source object</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>the referenced object</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>reference</strong>(name, value, options = {})  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Define a reference sourcing data from the enclosing source object. If no block is given, the reference object will be extracted from <a href="name">source_object</a>, otherwise it will be the block return.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the field</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the referenced object</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:type</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Creates a polymorphic reference for a named type, requires &#39;for&#39;</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:for</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>For a polymorphic relation, provide the type that is being requested/generated. (This will usually be from model data or request)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:generate_from_type</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Generate (inline) a name_type field with the type value</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:link_id</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Generate a link id name_id in the source location. Defaults to true</p>
</div>
          
        </li>
      
    </ul>
  


</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


385
386
387</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 385</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reference'>reference</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_reference'>reference</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args_or_name'>args_or_name</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="request_example-instance_method">
  
    #<strong>request_example</strong>(*v)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define an example request path (no scheme or host) that will be included in documentation. If not specified, the <span class='object_link'><a href="#path-instance_method" title="Flappi::Definition#path (method)">#path</a></span> is used.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>v</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The request example URL</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


464
465
466</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 464</span>

<span class='kw'>def</span> <span class='id identifier rubyid_request_example'>request_example</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_example'>set_example</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>request</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="response_example-instance_method">
  
    #<strong>response_example</strong>(*v)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define an example response that will be included in documentation.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>v</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The response example.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


457
458
459</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 457</span>

<span class='kw'>def</span> <span class='id identifier rubyid_response_example'>response_example</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_example'>set_example</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>response</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="return_error-instance_method">
  
    #<strong>return_error</strong>(status_code, error_info)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>From inside a query, return an error</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>status_code</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an HTTP status code to return</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>error_info</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a message String or an error hash to return</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


598
599
600</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 598</span>

<span class='kw'>def</span> <span class='id identifier rubyid_return_error'>return_error</span><span class='lparen'>(</span><span class='id identifier rubyid_status_code'>status_code</span><span class='comma'>,</span> <span class='id identifier rubyid_error_info'>error_info</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_return_error'>return_error</span><span class='lparen'>(</span><span class='id identifier rubyid_status_code'>status_code</span><span class='comma'>,</span> <span class='id identifier rubyid_error_info'>error_info</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:return_error</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="return_no_content-instance_method">
  
    #<strong>return_no_content</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>From inside a query, return 204 NO CONTENT</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


591
592
593</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 591</span>

<span class='kw'>def</span> <span class='id identifier rubyid_return_no_content'>return_no_content</span>
  <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_return_no_content'>return_no_content</span> <span class='kw'>if</span> <span class='ivar'>@delegate</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:return_no_content</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="strict-instance_method">
  
    #<strong>strict</strong>(mode = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Enable/disable strict mode, unknown parameters will cause an error\ Default is to disable this</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


577
578
579</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 577</span>

<span class='kw'>def</span> <span class='id identifier rubyid_strict'>strict</span><span class='lparen'>(</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoint_info'>endpoint_info</span><span class='lbracket'>[</span><span class='symbol'>:strict_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_mode'>mode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="title-instance_method">
  
    #<strong>title</strong>(v)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define the title</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>v</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The title to be shown in documentation.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


416
417
418</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 416</span>

<span class='kw'>def</span> <span class='id identifier rubyid_title'>title</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoint_info'>endpoint_info</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="version-instance_method">
  
    #<strong>version</strong>(version_rule)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define the version this endpoint works with.</p>

<p>This assumes that a version plan (which defines semantic versioning and version flavours) is configured into Flappi.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>version_rule</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>version_rule</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:equals</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>A version which must be matched for the endpoint to be supported. The version can be wildcarded with &#39;*&#39;.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:matches</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Synonym for equals</p>
</div>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


436
437
438
439
440</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/flappi/definition.rb', line 436</span>

<span class='kw'>def</span> <span class='id identifier rubyid_version'>version</span><span class='lparen'>(</span><span class='id identifier rubyid_version_rule'>version_rule</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No version plan is defined - cannot use &#39;version&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_version_plan'>version_plan</span>

  <span class='ivar'>@version_rule</span> <span class='op'>=</span> <span class='id identifier rubyid_version_rule'>version_rule</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Nov 17 10:37:40 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.6.5).
</div>

    </div>
  </body>
</html>